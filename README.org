#+title: emacs-comment-translate

Show translations for comments in a posframe when you hover (idle at point or
mouse position).

** Requirements

- Emacs 27+
- [[https://github.com/tumashu/posframe][posframe.el]]
- Network access (default backend uses Google Translate's endpoint)

** Demo
https://github.com/user-attachments/assets/cd56ec50-83ed-487b-8fb8-972293d16a31

** Install

Put ~comment-translate.el~ on your ~load-path~ and enable the mode:

#+begin_src elisp
(require 'comment-translate)
(comment-translate-mode 1)
;; or
(global-comment-translate-mode 1)
#+end_src

** Configuration

#+begin_src elisp
(setq comment-translate-target-language "ja"
      comment-translate-source-language "auto"
      comment-translate-idle-delay 0.6
      comment-translate-hover-source 'mouse
      comment-translate-include-docstrings t)
#+end_src

To control which modes are treated as docstring sources:

#+begin_src elisp
(setq comment-translate-docstring-modes
      '(emacs-lisp-mode lisp-interaction-mode))
#+end_src

Python docstring modes:

#+begin_src elisp
(setq comment-translate-docstring-python-modes
      '(python-mode python-ts-mode))
#+end_src

Common Lisp docstring modes:

#+begin_src elisp
(setq comment-translate-docstring-common-lisp-modes
      '(lisp-mode common-lisp-mode))
#+end_src

** Commands

- ~comment-translate-show~ - show translation at the current hover location
- ~comment-translate-hide~ - hide the posframe
- ~comment-translate-clear-cache~ - clear the translation cache
